<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   mari.DDI
  </title>
  <link href="epydoc.css" rel="stylesheet" type="text/css"/>
  <script src="epydoc.js" type="text/javascript">
  </script>
 </head>
 <body alink="#204080" bgcolor="white" link="blue" text="black" vlink="#204080">
  <!-- ==================== NAVIGATION BAR ==================== -->
  <table cellpadding="0" cellspacing="0" width="100%">
   <tr valign="top">
    <td width="100%">
     <span class="breadcrumbs">
      <a href="mari-module.html">
       Package&nbsp;mari
      </a>
      ::
        Class&nbsp;DDI
     </span>
    </td>
    <td>
     <table cellpadding="0" cellspacing="0">
      <!-- hide/show private -->
      <tr>
       <td align="right">
        <span class="options">
         [
         <a href="frames.html" target="_top">
          frames
         </a>
         ]&nbsp;|&nbsp;
         <a href="mari.DDI-class.html" target="_top">
          no&nbsp;frames
         </a>
         ]
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
  </table>
  <!-- ==================== CLASS DESCRIPTION ==================== -->
  <h1 class="epydoc">
   Class DDI
  </h1>
  <p class="nomargin-top">
   <span class="codelink">
    <a href="mari-pysrc.html#DDI">
     source&nbsp;code
    </a>
   </span>
  </p>
  <pre class="base-tree">
object --+
         |
        <strong class="uidshort">DDI</strong>
</pre>
  <hr/>
  <p>
   This class gives access to some of the functionality of Mari's Dynamic
  Data Interface.
  </p>
  <p>
   The Dynamic Data Interface, or
   <a class="link" href="mari.DDI-class.html">
    DDI
   </a>
   , is the low level data handling system in Mari. This
  system manages the caches on disk and in memory.
  </p>
  <p>
   The functionality provided can be used to test Mari's performance on 
  different systems.
  </p>
  <p>
   A good test of raw performance is to set the cache size to 1 GB (but 
  remember to change this back!) and then run a profile test for 4 or 5 GB.
  This ensures that all of the memory created during the test is saved and 
  loaded. You should use a new, empty project for this sort of testing.
  </p>
  <p>
   <b>
    Example Code
   </b>
  </p>
  <pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">import</span> mari
<span class="py-prompt">&gt;&gt;&gt; </span>mari.ddi.garbageCollect()</pre>
  <!-- ==================== INSTANCE METHODS ==================== -->
  <a name="section-InstanceMethods">
  </a>
  <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="summary" width="100%">
   <tr bgcolor="#70b0f0" class="table-header">
    <td align="left" class="table-header" colspan="2">
     <span class="table-header">
      Instance Methods
     </span>
    </td>
   </tr>
   <tr>
    <td align="right" class="summary" valign="top" width="15%">
     <span class="summary-type">
      None
     </span>
    </td>
    <td class="summary">
     <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
       <td>
        <span class="summary-sig">
         <a class="summary-sig-name" href="mari.DDI-class.html#clearMemoryCache">
          clearMemoryCache
         </a>
         (
         <span class="summary-sig-arg">
          self
         </span>
         )
        </span>
        <br/>
        Releases RAM by uncaching currently cached data blocks.
       </td>
       <td align="right" valign="top">
        <span class="codelink">
         <a href="mari-pysrc.html#DDI.clearMemoryCache">
          source&nbsp;code
         </a>
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <tr>
    <td align="right" class="summary" valign="top" width="15%">
     <span class="summary-type">
      qint64
     </span>
    </td>
    <td class="summary">
     <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
       <td>
        <span class="summary-sig">
         <a class="summary-sig-name" href="mari.DDI-class.html#dataBlocks">
          dataBlocks
         </a>
         (
         <span class="summary-sig-arg">
          self
         </span>
         )
        </span>
        <br/>
        Returns the total number of data blocks managed by Mari.
       </td>
       <td align="right" valign="top">
        <span class="codelink">
         <a href="mari-pysrc.html#DDI.dataBlocks">
          source&nbsp;code
         </a>
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <tr>
    <td align="right" class="summary" valign="top" width="15%">
     <span class="summary-type">
      None
     </span>
    </td>
    <td class="summary">
     <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
       <td>
        <span class="summary-sig">
         <a class="summary-sig-name" href="mari.DDI-class.html#garbageCollect">
          garbageCollect
         </a>
         (
         <span class="summary-sig-arg">
          self
         </span>
         )
        </span>
        <br/>
        Performs a full garbage collection on the cache directory.
       </td>
       <td align="right" valign="top">
        <span class="codelink">
         <a href="mari-pysrc.html#DDI.garbageCollect">
          source&nbsp;code
         </a>
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <tr>
    <td align="right" class="summary" valign="top" width="15%">
     <span class="summary-type">
      qint64
     </span>
    </td>
    <td class="summary">
     <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
       <td>
        <span class="summary-sig">
         <a class="summary-sig-name" href="mari.DDI-class.html#liveBlocks">
          liveBlocks
         </a>
         (
         <span class="summary-sig-arg">
          self
         </span>
         )
        </span>
        <br/>
        Returns the number of blocks that are loaded into system RAM.
       </td>
       <td align="right" valign="top">
        <span class="codelink">
         <a href="mari-pysrc.html#DDI.liveBlocks">
          source&nbsp;code
         </a>
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <tr>
    <td align="right" class="summary" valign="top" width="15%">
     <span class="summary-type">
      qint64
     </span>
    </td>
    <td class="summary">
     <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
       <td>
        <span class="summary-sig">
         <a class="summary-sig-name" href="mari.DDI-class.html#liveBytes">
          liveBytes
         </a>
         (
         <span class="summary-sig-arg">
          self
         </span>
         )
        </span>
        <br/>
        Returns the number of bytes currently loaded into system RAM.
       </td>
       <td align="right" valign="top">
        <span class="codelink">
         <a href="mari-pysrc.html#DDI.liveBytes">
          source&nbsp;code
         </a>
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <tr>
    <td align="right" class="summary" valign="top" width="15%">
     <span class="summary-type">
      qint64
     </span>
    </td>
    <td class="summary">
     <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
       <td>
        <span class="summary-sig">
         <a class="summary-sig-name" href="mari.DDI-class.html#memoryCacheSize">
          memoryCacheSize
         </a>
         (
         <span class="summary-sig-arg">
          self
         </span>
         )
        </span>
        <br/>
        Returns the size of the memory cache.
       </td>
       <td align="right" valign="top">
        <span class="codelink">
         <a href="mari-pysrc.html#DDI.memoryCacheSize">
          source&nbsp;code
         </a>
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <tr>
    <td align="right" class="summary" valign="top" width="15%">
     <span class="summary-type">
      int
     </span>
    </td>
    <td class="summary">
     <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
       <td>
        <span class="summary-sig">
         <a class="summary-sig-name" href="mari.DDI-class.html#profile">
          profile
         </a>
         (
         <span class="summary-sig-arg">
          self
         </span>
         ,
         <span class="summary-sig-arg">
          NumberOfBlocks
         </span>
         =
         <span class="summary-sig-default">
          30000
         </span>
         ,
         <span class="summary-sig-arg">
          BlockSize
         </span>
         =
         <span class="summary-sig-default">
          30000
         </span>
         ,
         <span class="summary-sig-arg">
          RandomSize
         </span>
         =
         <span class="summary-sig-default">
          False
         </span>
         )
        </span>
        <br/>
        Runs performance tests on the
        <a class="link" href="mari.DDI-class.html">
         DDI
        </a>
        .
       </td>
       <td align="right" valign="top">
        <span class="codelink">
         <a href="mari-pysrc.html#DDI.profile">
          source&nbsp;code
         </a>
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <tr>
    <td align="right" class="summary" valign="top" width="15%">
     <span class="summary-type">
      None
     </span>
    </td>
    <td class="summary">
     <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
       <td>
        <span class="summary-sig">
         <a class="summary-sig-name" href="mari.DDI-class.html#setMemoryCacheSize">
          setMemoryCacheSize
         </a>
         (
         <span class="summary-sig-arg">
          self
         </span>
         ,
         <span class="summary-sig-arg">
          Size
         </span>
         )
        </span>
        <br/>
        Sets the amount of system memory used by the
        <a class="link" href="mari.DDI-class.html">
         DDI
        </a>
        for caching.
       </td>
       <td align="right" valign="top">
        <span class="codelink">
         <a href="mari-pysrc.html#DDI.setMemoryCacheSize">
          source&nbsp;code
         </a>
        </span>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <tr>
    <td class="summary" colspan="2">
     <p class="indent-wrapped-lines">
      <b>
       Inherited from
       <code>
        object
       </code>
      </b>
      :
      <code>
       __delattr__
      </code>
      ,
      <code>
       __format__
      </code>
      ,
      <code>
       __getattribute__
      </code>
      ,
      <code>
       __hash__
      </code>
      ,
      <code>
       __init__
      </code>
      ,
      <code>
       __new__
      </code>
      ,
      <code>
       __reduce__
      </code>
      ,
      <code>
       __reduce_ex__
      </code>
      ,
      <code>
       __repr__
      </code>
      ,
      <code>
       __setattr__
      </code>
      ,
      <code>
       __sizeof__
      </code>
      ,
      <code>
       __str__
      </code>
      ,
      <code>
       __subclasshook__
      </code>
     </p>
    </td>
   </tr>
  </table>
  <!-- ==================== PROPERTIES ==================== -->
  <a name="section-Properties">
  </a>
  <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="summary" width="100%">
   <tr bgcolor="#70b0f0" class="table-header">
    <td align="left" class="table-header" colspan="2">
     <span class="table-header">
      Properties
     </span>
    </td>
   </tr>
   <tr>
    <td class="summary" colspan="2">
     <p class="indent-wrapped-lines">
      <b>
       Inherited from
       <code>
        object
       </code>
      </b>
      :
      <code>
       __class__
      </code>
     </p>
    </td>
   </tr>
  </table>
  <!-- ==================== METHOD DETAILS ==================== -->
  <a name="section-MethodDetails">
  </a>
  <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
   <tr bgcolor="#70b0f0" class="table-header">
    <td align="left" class="table-header" colspan="2">
     <span class="table-header">
      Method Details
     </span>
    </td>
   </tr>
  </table>
  <a name="clearMemoryCache">
  </a>
  <div>
   <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
    <tr>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top">
        <td>
         <h3 class="epydoc">
          <span class="sig">
           <span class="sig-name">
            clearMemoryCache
           </span>
           (
           <span class="sig-arg">
            self
           </span>
           )
          </span>
         </h3>
        </td>
        <td align="right" valign="top">
         <span class="codelink">
          <a href="mari-pysrc.html#DDI.clearMemoryCache">
           source&nbsp;code
          </a>
         </span>
         &nbsp;
        </td>
       </tr>
      </table>
      <p>
       Releases RAM by uncaching currently cached data blocks.
      </p>
      <p>
       After calling this method, the number of data blocks reported by 
  liveBlocks should be significantly reduced.
      </p>
      <dl class="fields">
       <dt>
        Returns: None
       </dt>
      </dl>
     </td>
    </tr>
   </table>
  </div>
  <a name="dataBlocks">
  </a>
  <div>
   <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
    <tr>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top">
        <td>
         <h3 class="epydoc">
          <span class="sig">
           <span class="sig-name">
            dataBlocks
           </span>
           (
           <span class="sig-arg">
            self
           </span>
           )
          </span>
         </h3>
        </td>
        <td align="right" valign="top">
         <span class="codelink">
          <a href="mari-pysrc.html#DDI.dataBlocks">
           source&nbsp;code
          </a>
         </span>
         &nbsp;
        </td>
       </tr>
      </table>
      <p>
       Returns the total number of data blocks managed by Mari.
      </p>
      <p>
       Mari manages data as individual blocks. This method returns the number
  of blocks that Mari currently knows about in the current project. Each 
  block may be of any size, and may be reused multiple times.
      </p>
      <dl class="fields">
       <dt>
        Returns: qint64
       </dt>
       <dd>
        The number of individual blocks that Mari knows about in the 
          current project
       </dd>
      </dl>
     </td>
    </tr>
   </table>
  </div>
  <a name="garbageCollect">
  </a>
  <div>
   <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
    <tr>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top">
        <td>
         <h3 class="epydoc">
          <span class="sig">
           <span class="sig-name">
            garbageCollect
           </span>
           (
           <span class="sig-arg">
            self
           </span>
           )
          </span>
         </h3>
        </td>
        <td align="right" valign="top">
         <span class="codelink">
          <a href="mari-pysrc.html#DDI.garbageCollect">
           source&nbsp;code
          </a>
         </span>
         &nbsp;
        </td>
       </tr>
      </table>
      <p>
       Performs a full garbage collection on the cache directory.
      </p>
      <p>
       Mari records all of your brush strokes to the
       <a class="link" href="mari.DDI-class.html">
        DDI
       </a>
       as you are painting. When
  you exit the application, or remove those undo records, the data on disk 
  is no longer needed. These garbage files are removed by Mari 
  automatically.
      </p>
      <p>
       If you want to optimize your cache (just before archiving, for 
  example) you can use this method. It should be used in conjunction with 
  the
       <a class="link" href="mari.History-class.html#clear">
        History.clear()
       </a>
       method. This will ensure that only valid
  data remains in the cache.
      </p>
      <dl class="fields">
       <dt>
        Returns: None
       </dt>
      </dl>
      <div class="fields">
       <p>
        <strong>
         Note:
        </strong>
        This may take a while to execute, depending on the size of the 
        cache.
       </p>
      </div>
     </td>
    </tr>
   </table>
  </div>
  <a name="liveBlocks">
  </a>
  <div>
   <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
    <tr>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top">
        <td>
         <h3 class="epydoc">
          <span class="sig">
           <span class="sig-name">
            liveBlocks
           </span>
           (
           <span class="sig-arg">
            self
           </span>
           )
          </span>
         </h3>
        </td>
        <td align="right" valign="top">
         <span class="codelink">
          <a href="mari-pysrc.html#DDI.liveBlocks">
           source&nbsp;code
          </a>
         </span>
         &nbsp;
        </td>
       </tr>
      </table>
      <p>
       Returns the number of blocks that are loaded into system RAM.
      </p>
      <p>
       This can be smaller than the total number of blocks.
      </p>
      <dl class="fields">
       <dt>
        Returns: qint64
       </dt>
       <dd>
        The number of blocks that are live - i.e. loaded into system RAM
       </dd>
      </dl>
     </td>
    </tr>
   </table>
  </div>
  <a name="liveBytes">
  </a>
  <div>
   <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
    <tr>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top">
        <td>
         <h3 class="epydoc">
          <span class="sig">
           <span class="sig-name">
            liveBytes
           </span>
           (
           <span class="sig-arg">
            self
           </span>
           )
          </span>
         </h3>
        </td>
        <td align="right" valign="top">
         <span class="codelink">
          <a href="mari-pysrc.html#DDI.liveBytes">
           source&nbsp;code
          </a>
         </span>
         &nbsp;
        </td>
       </tr>
      </table>
      <p>
       Returns the number of bytes currently loaded into system RAM.
      </p>
      <p>
       The number of bytes currently loaded into system RAM
      </p>
      <dl class="fields">
       <dt>
        Returns: qint64
       </dt>
      </dl>
     </td>
    </tr>
   </table>
  </div>
  <a name="memoryCacheSize">
  </a>
  <div>
   <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
    <tr>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top">
        <td>
         <h3 class="epydoc">
          <span class="sig">
           <span class="sig-name">
            memoryCacheSize
           </span>
           (
           <span class="sig-arg">
            self
           </span>
           )
          </span>
         </h3>
        </td>
        <td align="right" valign="top">
         <span class="codelink">
          <a href="mari-pysrc.html#DDI.memoryCacheSize">
           source&nbsp;code
          </a>
         </span>
         &nbsp;
        </td>
       </tr>
      </table>
      <p>
       Returns the size of the memory cache.
      </p>
      <dl class="fields">
       <dt>
        Returns: qint64
       </dt>
       <dd>
        The size in bytes of the memory cache
       </dd>
      </dl>
      <div class="fields">
       <p>
        <strong>
         See Also:
        </strong>
        <a class="link" href="mari.DDI-class.html#setMemoryCacheSize">
         setMemoryCacheSize
        </a>
       </p>
      </div>
     </td>
    </tr>
   </table>
  </div>
  <a name="profile">
  </a>
  <div>
   <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
    <tr>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top">
        <td>
         <h3 class="epydoc">
          <span class="sig">
           <span class="sig-name">
            profile
           </span>
           (
           <span class="sig-arg">
            self
           </span>
           ,
           <span class="sig-arg">
            NumberOfBlocks
           </span>
           =
           <span class="sig-default">
            30000
           </span>
           ,
           <span class="sig-arg">
            BlockSize
           </span>
           =
           <span class="sig-default">
            30000
           </span>
           ,
           <span class="sig-arg">
            RandomSize
           </span>
           =
           <span class="sig-default">
            False
           </span>
           )
          </span>
         </h3>
        </td>
        <td align="right" valign="top">
         <span class="codelink">
          <a href="mari-pysrc.html#DDI.profile">
           source&nbsp;code
          </a>
         </span>
         &nbsp;
        </td>
       </tr>
      </table>
      <p>
       Runs performance tests on the
       <a class="link" href="mari.DDI-class.html">
        DDI
       </a>
       .
      </p>
      <p>
       This can help to track down problems on systems showing poor 
  performance. This method will create a number of blocks of a given size. 
  These blocks will be filled with random data to ensure they are unique, 
  registered with the
       <a class="link" href="mari.DDI-class.html">
        DDI
       </a>
       , 
  and then freed. The time taken for this in milliseconds will be returned.
  If the operation detects any problems they will be reported into the Mari
  Log.
      </p>
      <dl class="fields">
       <dt>
        Parameters:
       </dt>
       <dd>
        <ul class="nomargin-top">
         <li>
          <strong class="pname">
           <code>
            NumberOfBlocks
           </code>
          </strong>
          (int) - The number of blocks to register while profiling
         </li>
         <li>
          <strong class="pname">
           <code>
            BlockSize
           </code>
          </strong>
          (unsigned int) - The maximum size of block to create while profiling, in bytes
         </li>
         <li>
          <strong class="pname">
           <code>
            RandomSize
           </code>
          </strong>
          (bool) - If set to True, each block will be of a random size between 1 and
          <code class="link">
           BlockSize
          </code>
          bytes; otherwise all blocks 
          will be exactly
          <code class="link">
           BlockSize
          </code>
          bytes.
         </li>
        </ul>
       </dd>
       <dt>
        Returns: int
       </dt>
       <dd>
        The time in milliseconds that the test took to run
       </dd>
      </dl>
     </td>
    </tr>
   </table>
  </div>
  <a name="setMemoryCacheSize">
  </a>
  <div>
   <table bgcolor="white" border="1" cellpadding="3" cellspacing="0" class="details" width="100%">
    <tr>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top">
        <td>
         <h3 class="epydoc">
          <span class="sig">
           <span class="sig-name">
            setMemoryCacheSize
           </span>
           (
           <span class="sig-arg">
            self
           </span>
           ,
           <span class="sig-arg">
            Size
           </span>
           )
          </span>
         </h3>
        </td>
        <td align="right" valign="top">
         <span class="codelink">
          <a href="mari-pysrc.html#DDI.setMemoryCacheSize">
           source&nbsp;code
          </a>
         </span>
         &nbsp;
        </td>
       </tr>
      </table>
      <p>
       Sets the amount of system memory used by the
       <a class="link" href="mari.DDI-class.html">
        DDI
       </a>
       for caching.
      </p>
      <p>
       Mari maintains an area of system memory that it uses to cache data 
  blocks. Blocks are loaded from disk into this cache, and then removed in 
  a least-recently-used scheme. i.e. if blocks are used, they are kept 
  around, but if a block is not used for a while and some memory needs to 
  be freed, it will be cleared to make room for a new block.
      </p>
      <p>
       This method controls the size of this cache. It does not need to be 
  too big, as Mari is very efficient at managing this data. It is a good 
  idea to limit this so other programs on your system have memory to work 
  with.
      </p>
      <dl class="fields">
       <dt>
        Parameters:
       </dt>
       <dd>
        <ul class="nomargin-top">
         <li>
          <strong class="pname">
           <code>
            Size
           </code>
          </strong>
          (qint64) - The number of bytes Mari should use for memory caching
         </li>
        </ul>
       </dd>
       <dt>
        Returns: None
       </dt>
      </dl>
      <div class="fields">
       <p>
        <strong>
         Warning:
        </strong>
        If set to a large value, Mari will use all of the RAM on your 
        system, and you will see degraded performance.
       </p>
       <p>
        <strong>
         See Also:
        </strong>
        <a class="link" href="mari.DDI-class.html#memoryCacheSize">
         memoryCacheSize()
        </a>
       </p>
      </div>
     </td>
    </tr>
   </table>
  </div>
  <br/>
  <!-- ==================== NAVIGATION BAR ==================== -->
  <table border="0" cellpadding="0" cellspacing="0" width="100%%">
   <tr>
   </tr>
  </table>
  <script type="text/javascript">
   <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
  </script>
 </body>
</html>
